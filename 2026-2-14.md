# Daily Log

**Date:** 14 February 2026

---

## ููุฎุต ุงููู ุฐุงูุฑุชู

- Chapter 11 Stream Processing
  - Transmitting Event Streams
    - Messaging Systems
    - Partitioned Logs
  - Databases and Streams
    - Keeping Systems in Sync
    - Change Data Capture
    - Event Sourcing
    - State, Streams, and Immutability

---

## ุชูุฎูุตู ููู ุฐุงูุฑุชู + ุดุฑุญู

ุชูุงู ๐ ููุณ ุงูููุงู ุจุงูุธุจุท ูู ุบูุฑ ุฃู ุชุนุฏูู ูู ุงูุตูุงุบุฉ ุฃู ุญุฐู ุฃู ุฅุถุงูุฉุ ุจุณ ููุณู Markdown ุฃุญุณู ูุจุงุณุชุฎุฏุงู ุนูุงุตุฑ ุฃูุชุฑ ุฒู **bold** ู `inline code` ู quote ู separators ูุบูุฑู.

---

# Batch Processing vs Stream Processing

> ูุงู Batch Processing  ููุง ุจูุชุนุงูู ูุน ุฏุงุชุง ูููุง ุจุฏุงูู ู ูููุง ููุงูู ู ุญุฌููุง ูุนุฑูู
> ููุง ุจููุฑุงูุง ูููุง ู ุจุนุฏ ูุฏุง ูุทูุน ูุชูุฌู
> ุฒู ูุซูุง ูุนูู indexing ุงู ูุญุณุจ ุญุงุฌุงุช statistics ุงู ูุนูู recommendation ู ูุงู ุงูุงููุถูุน ููููู ุดููู

ูุงูู ุงููุดููู ุงู ุงูุฏุงุชุง ูุด ุจุชุฎูุต ูุนููุง ูุนูู ูู **Unbounded**

---

## ูููู ุงูุชุฑ:

ุฏูููุช ูู ุงูููุฒุฑุฒ ูุชุจู ุฏุชุง ุงูุจุงุฑุญ ุงููุฏ ูููุชุจู ุงูููุงุฑุฏู ู ุจูุฑุง ู ููุฐุง ูุนูู ุฏุงููุง ุงูุฏุงุชุง ูุงุดูู

---

## ุงููุฑู ุจูู Batch ู Stream

### Batch Processing

ุจูุฌูุน ุฏุงุชุง ูุชุฑุฉ ูุนููุฉ `(ููู โ ุณุงุนุฉ)`
ูุดุบู job ุนูููุง
ูุทูุน ูุชูุฌุฉ
ู ูุณุชูู ุงููุชุฑุฉ ุงูุฌุงูุฉ

**ูุซุงู:**
ูุญุณุจ ุนุฏุฏ ุงูุทูุจุงุช ูู ููู ุจุงูููู ุงููุดููู ุงู ุงููุชูุฌุฉ ุจุชุธูุฑ ูุชุฃุฎุฑ

---

### Stream Processing

ู ุงูุญู ููุง ูู ุงู Stream Processing

ุจุฏุงู ูุง ูุณุชูู ุงูููู ูุฎูุต
ูุง ูุนูู ุจุฑูุณูุณ ูู `event` ุงูู ูุง ูุญุตู

ูุนูู ูู ุงู user ุนูู order ูุชุญุณุจ ุนูุทูู ู ูุฏุง

ุฏู ุงุณูู:

> `Processing Events as they happen`

---

## ุทุจ ูุนูู ุฅูู Streamุ

```text
stream = data that arrives incrementally over time
```

ูุนูู ุงูุฏุงุชุง ุจุชูุฌู ูุงุญุฏู ูุงุญุฏู ูุด ุฏูุนู ูุงุญุฏู

---

## ูู Batch:

ูุงุฒู ููุฑุฃ ูู ุงูุฏุงุชุง ูุจู ูุง ูุทูุน ูุชูุฌุฉ

**ูุซุงู:**
ูู sorting (ุฒู MapReduce) ููููุนุด ุชุจุฏุฃ ุชุทูุน output ูุจู ูุง ุชูุฑุฃ ูู input ูุฃู ูููู ุขุฎุฑ record ูููู ุฃุตุบุฑ ูุงุญุฏ.

ููู ูู Stream ุฅุญูุง ูุด ุจูุณุชูู ุงูุฏุงุชุง ุชุฎูุต ูุฃููุง ุฃุตููุง ุนูุฑูุง ูุง ูุชุฎูุต.

---

# ููู Stream Processing ูููุ

ูุฃู ุงููุณุชุฎุฏููู ุฏูููุชู ุนุงูุฒูู:

* Notification ููุฑู
* Real-time analytics
* Live dashboards
* Fraud detection ูุญุธู
* Recommendation ูุจุงุดุฑุฉ
* Online monitoring

ูุญุฏุด ููุณุชูู 24 ุณุงุนุฉ.

---

# ูุซุงู ุนููู ุจุณูุท

ุชุฎูู ุนูุฏู E-commerce:

## Batch

ุชุญุณุจ ุงููุจูุนุงุช ูู ููู ุจุงูููู

## Stream

ูู ูุง Order ูุญุตู:

* ุชุญุฏุซ dashboard ููุฑูุง
* ุชุจุนุช notification
* ุชุญุฏุซ recommendation
* ุชุญุฏุซ ุงููุฎุฒูู

---

---

# Transmitting Event Streams

ูู ุงู Batch ุงูููู ุจูุชุญูู ูุณูุณูู ูู ุงู Records

ุงููุง ู ุงู Stream ูู Record ุงุณูู **Event**

ู ุชุนุฑูู ุงู Event ูู:

> Object ุตุบูุฑ ู ูุณุชูู ู immutable ู ุจููุตู ุญุงุฌู ุญุตูุช ู ููุช ูุนูู

---

## ุจูุญุชูู ุนูู ุงููุ

* ุจูุงูุงุช ุงูุญุฏุซ
* ุงู Timestamp ุงู ููุช ุญุฏูุซู

ููููู ูุชูุชุจ ู:

`Text`
`Json`
`Binary Gormat`

---

# Producer vs Consumer

ูู ุงู Batch ุงูููู ุจูุชูุชุจ ูุฑู ู jobs ูุชูุฑ ูููู ุชูุฑุงู

ู ุงู Stream ุงูุญุฏุซ ุจูุชุนูู ูุฑู ูุงุญุฏู ุนู ุทุฑูู ุงู:

`Producer (Publisher/Sender)`

ู ูุชูุฑู ูู:

`Consumers (Subscribers/Recipients)`

---

# Topic ุฃู Stream

ู ุงู File System ุงุณู ุงูููู ุจูุฌูุน ุงู records ุฃููู ุฒู ุจุนุถ

ูู ุงู Streaming ุจูุง ุงู Events ุฃููุฑุชุจุทู ุจุชุชุญุท ู:

> Topic (Stream)

ูุซูุง:

```
Topic: orders
Topic: user_clicks
```

---

# ูู ููุฏุฑ ูุณุชุฎุฏู Database ุนุงุฏู ุจุฏู Streaming Systemุ

ูุธุฑููุง ุขู

ูููู ูุนูู ูุฏู ุงุฒุงูุ

* Producer ููุชุจ events ูู database
* Consumer ูุนูู polling ูู ุดููุฉ
* ูุดูู ูู ูู records ุฌุฏูุฏุฉ ููุง ูุฃ

ูุฏู ุจุงูุธุจุท ุงููู ุงูู Batch ุจูุนููู.

---

## ุงููุดููุฉ ูู Polling

ูู ูุง ุชููู ุงูุฒูู ุจูู ูู poll ูุงูุชุงูู:

* ุชูู latency
* ููู ุชุฒูุฏ overhead

ูููุ

ูุนุธู requests ูุด ูุชุฑุฌุน ุญุงุฌุฉ ุฌุฏูุฏุฉ
ุจุชุถุบุท ุนูู ุงูู DB
ุจุชุณุชููู network ู CPU

ูุนูู ูู ุจุชpoll ูู ุซุงููุฉ ุบุงูุจูุง ูุด ููููู ูู data ุฌุฏูุฏุฉ ูู ูุฑุฉ

---

## ุงูุญู ุงูุฃูุถู

ุจุฏู ูุง Consumer ูุณุฃู ูู ุดููุฉ:

> "ูู ุฌุฏูุฏุ"

ูุฎูู ุงูุณูุณุชู ูููู ูู:

> "ูู ุญุฏุซ ุฌุฏูุฏ"

ูุนูู `push` ุจุฏู `pull`.

---

# ุทุจ ููู ููุณุชุฎุฏูุด Triggers ูู DBุ

Relational DBs ูููุง triggers
ููู ูุฏุฑุงุชูุง ูุญุฏูุฏุฉ

ูุด ูุตููุฉ ูู event delivery system
ูุงูุช ุฅุถุงูุฉ ุฌุงูุจูุฉ (afterthought)
ูุด ูุนูููุฉ ุนุดุงู ุชุจูู message broker.

---

ุนุดุงู ูุฏู ุธูุฑุช ุฃูุธูุฉ ูุฎุตูุต ูุชูุตูู ุงูุฃุญุฏุงุซ ุฒู:

* Apache Kafka
* RabbitMQ
* Apache Pulsar

ูุฏู ูุนูููุฉ ูุฎุตูุต ุนุดุงู:

* ุชุฎุฒูู events
* ุชูุฒูุนูู
* ุถูุงู ุงูุชุฑุชูุจ
* ุถูุงู ุงูุชุณููู
* scalability

---

---

# Messaging Systems

ุงูููุฑู ููุง ุงู ุจุฏู ูุง Producer ูููู Consumer ูุจุงุดุฑุฉ ูุญุท ูุณูุท ูู ุงููุต

---

## ุณุคุงู 1

### What happens if the producers send messages faster than the consumers can process them?

ูู producers ุฃุณุฑุน ูู ุงููุณุชูููููุ

ูุนูู events ุจุชุชููุฏ ุฃุณุฑุน ูู ูุนุงูุฌุชูุง

ูู 3 ุญููู:

### 1) Drop messages

ููุฑูู ุงููุณุฏุฌุงุช ุงูุฒูุงุฏู
ูุฏู ูุด ููุงุณุจ ููุญุงุฌุงุช ุงููู ููู ูููุง ูุซูุง ุงู Counting

### 2) Buffer in queue

ูุฎุฒููู ูู Queue ูุญุฏ ูุง ูุชุนุงูุฌู
ูุฏู ุงูุชุฑ ุญุงุฌู ูุดููุฑู

### 3) Backpressure

ูููู producers ุดููุฉ
ุฒู Unix pipe ู TCP

ูู ุงูุจุงูุฑ ุงูุชูุฃ โ producers ูุชููู

---

## ุณุคุงู 2

### ูู ุญุตู Crashุ

ูู consumer ููุนุ
ูู broker ููุนุ
ูู ุงูุฑุณุงุฆู ุชุถูุนุ

ุนุดุงู ุชุถูู ุงู ูููุด ุญุงุฌู ุชูุน:

* ุชูุชุจ ุนูู Disk
* ุงู ุชุนูู Replication

ููู ุฏู ููู cost:

`Latency ุฃุนูู`
`Throughput ุฃูู`

---

# Messaging Architecture

## 1) Direct Messaging (ูู ุบูุฑ Broker)

ุฒู:

* UDP multicast
* Webhooks (HTTP callback)
* Libraries ุฒู ZeroMQ

ุฏู ุจุชุฎูู:

```
Producer โ Consumer
```

ุงููุดููุฉุ

* ูู Consumer offline โ ุงูุฑุณุงูุฉ ุชุถูุน
* ูู Producer ููุน โ retried messages ุชุถูุน

ูุงุฒู ุชุจูู retry logic ุจููุณู

---

## 2) Message Broker

ุงูู Broker ุนุจุงุฑุฉ ุนู Database ูุชุฎุตุตุฉ ููุฑุณุงุฆู

---

### ุงููุฑู ุจูู Broker ู Database

| Database                    | Message Broker           |
| --------------------------- | ------------------------ |
| ูุฎุฒู ุงูุจูุงูุงุช ูุญุฏ ูุง ุชูุณุญูุง | ููุณุญ ุงูุฑุณุงูุฉ ุจุนุฏ ุชุณููููุง |
| Query ุญุฑ                    | Subscription             |
| Snapshot query              | Notification on change   |
| Working set ูุจูุฑ            | ุบุงูุจูุง queues ูุตูุฑุฉ      |

---

---

# Multiple Consumers

ููุง ูููู ูู ุฃูุชุฑ ูู Consumer ุนูุฏูุง ูู ููุทูู ูููู ูุณุชุฎุฏููู

---

## 1) Load Balancing

ูู ุฑุณุงูุฉ ุชุฑูุญ ููุงุญุฏ ุจุณ ูู ุงูู consumers

ูููุฏ ูู:

* ุงููุนุงูุฌุฉ ุชูููุฉ
* ุนุงูุฒ ุชูุฒุน ุงูุดุบู

---

## 2) Fan-Out

ูู ุฑุณุงูุฉ ุชุฑูุญ ููู consumers

ูููุฏ ูู ุนูุฏู ุฃูุชุฑ ูู Service ูุญุชุงุฌุฉ ููุณ ุงูุจูุงูุงุช

ุฒู:

* Recommendation Service
* Analytics Service
* Notification Service

![alt text](image-28.png)

---

ูููู ุชุฏูุฌ ุงูุงุชููู

```
Topic(Stream): user-events
```

Group 1: Recommendation workers (load balanced ุจูููู)
Group 2: Analytics workers (load balanced ุจูููู)

ููู ูู group ุจูุงุฎุฏ ูู ุงูุฃุญุฏุงุซ.

---

# Acknowledgment

ุงูููุทู ุฏู ูููู ุฌุฏุง

ุงูู Broker ูุด ุจููุณุญ ุงูุฑุณุงูุฉ ุบูุฑ ููุง Consumer ูููู `ACK`

ูู consumer ููุน ูุจู ุงูู ACK ุ
ุงูุฑุณุงูุฉ ุชุชุจุนุช ุชุงูู

---

## ูุดููุฉ ุงูุชุฑุชูุจ

ูู ุนูุฏู:

```
m1, m2, m3, m4
```

ูุงุญุฏ ูู consumers ููุน ุฃุซูุงุก m3
ู m4 ุงุชุนุงูุฌุช ูุจูู

ููุง m3 ุชุชุนุงุฏ
ุงูุชุฑุชูุจ ูุชุบูุฑ

ูุจูู ูููู ูุจูู:

```
m1 โ m2 โ m4 โ m3
```

ูุฏู ููู ุฌุฏูุง ูู ุนูุฏู:

* causal dependency
* state updates
* cumulative counters

---

## ุฅุฒุงู ุชุชุฌูุจ ูุดููุฉ ุงูุชุฑุชูุจุ

ูุชุณุชุฎุฏูุด load balancing

ุงุนูู:

```
partitioning based on key (ุฒู user_id)
```

ุจุญูุซ ูู user ูุฑูุญ ูููุณ consumer

ูุฏู ุงูุฃุณููุจ ุงููู ุจุชุณุชุฎุฏูู ุญุงุฌุงุช ุฒู Apache Kafka

![alt text](image-29.png)

---

---

# Partitioned Logs

## Traditional Messaging (JMS / AMQP style)

ุงูุฑุณุงูุฉ transient

ููุง consumer ูุนูู ACK โ ุงูุฑุณุงูุฉ ุชุชุญุฐู

ููููุนุด ุชุนูุฏ ุชุดุบูู consumer ูุชูุฑุฃ ููุณ ุงูุจูุงูุงุช

ุฏู mindset ุงุณูู:

```
Messaging = delivery only
```

---

## Databases / Files

ูู ุญุงุฌุฉ ุจุชุชูุชุจ ุจุชูุถู ููุฌูุฏุฉ

ุชูุฏุฑ ุชูุฑุฃ ุจูุงูุงุช ูู ุณูุฉ ูุงุชุช
ุชูุฏุฑ ุชุนูุฏ ุชุดุบูู batch job ุฃูู ูุฑุฉ

ุฏู mindset ุงุณูู:

```
Storage-first
```

---

## ุทุจ ููู ููุฌูุนุด ุงูุงุชูููุ

Durable storage ุฒู database
Notification ู low latency ุฒู messaging

ุงูุฅุฌุงุจุฉ ูู:

# Log-based Message Broker

---

## ูุนูู ุฅูู Log-Based Brokerุ

ูููุฌ ุจุจุณุงุทุฉ:

```
Append-only file
```

ูุนูู:

* Producer ูุถูู message ูู ุขุฎุฑ ุงูููุฌ
* Consumer ููุฑุฃ ูู ุงูููุฌ ุจุงูุชุฑุชูุจ
* ูููุด ุญุฐู

---

## Partitioning

ุนุดุงู ุชุฒูุฏ throughput ุจุฏู ูุง ูุจูู ูู Log ูุงุญุฏ:

ูุนูู Partitions

ูู partition Log ูุณุชูู
ู ูุชูุฑู ููุชูุชุจ ุนููู ููุญุฏู
ู ูููู ูุจูู ุนูู ููุจููุชุฑ ูุฎุชูู

---

## Offset

ูู ุฑุณุงูุฉ ูู partition ุชุงุฎุฏ:

```
Offset = ุฑูู ูุชุฒุงูุฏ
```

ูุซุงู:

```
offset 0 โ message1
offset 1 โ message2
offset 2 โ message3
```

---

ุฏุงุฎู ููุณ partition โ ุชุฑุชูุจ ูุถููู
ุจุณ ุจูู partitions โ ูููุด ุชุฑุชูุจ ูุถููู

---

Fan-Out ูู ุงูููุฌ ุณูู ุฌุฏูุง

ุนุดุงู ุงููุฑุงุกุฉ ูุด destructive
ู 10 consumers ููุฑูุง ููุณ ุงูุจูุงูุงุช
ู ูููุด ุญุฏ ุจูุฃุซุฑ ุนูู ุงูุชุงูู

---

## Load Balancing ููุง

ูุด ุนูู ูุณุชูู ุงูุฑุณุงูุฉ

ููู ุนูู ูุณุชูู:

```
Partition
```

ูุนูู ูู ุนูุฏู 4 partitions
ูุจูู ุฃูุตู ุนุฏุฏ consumers ูู group = 4

ู ูู consumer ูุงุฎุฏ partition ูุงูู

---

ุดุจู ุฌุฏูุง Database Replication

```
Broker   = Leader
Consumer = Follower
Offset   = Log Sequence Number
```
