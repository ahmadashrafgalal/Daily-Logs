# Daily Log

**Date:** 9 February 2026

---

## ملخص اللي ذاكرته

- Chapter 8 The Trouble with Distributed Systems
  - Unreliable Clocks
    - Monotonic Versus Time-of-Day Clocks
    - Clock Synchronization and Accuracy
    - Relying on Synchronized Clocks
    - Process Pauses
  - Knowledge, Truth, and Lies
    - The Truth Is Defined by the Majority
    - Byzantine Faults
    - System Model and Reality

---

## تلخيصي للي ذاكرته + شرحي

في نوعين أساسيين من الأسئلة أي سيستم بيسألها عن الوقت 

اول حاجه الاسئله اللي بتقيس مده او Duration 
دي مثلا زي ال request خد قد ايه 
اليوزر قعد قد ايه علي الموقع

تاني  حاجه هي اسئله عن وقت معين point in time
يعني الحاجه دي خصلت امتي 
زي مثلا المقال اتنعمل امتي 
الكاش هيخلص امتي 


ليه الوقت مشكلة في الـ Distributed Systems؟

عشان ببساطه الشبكه مش فورا بتلاقي الرد جي منها ف الرساله بتتبعت ف وقت و توصل بعده 
و المهم كمان ان كل جهاز ليه ساعه غير التاني, بمعني ايه؟
ان كل جهاز فيه ساعه hardware (quartz) واحده اسرع شويه و واحده ابطئ شويه ف ممكمن حدث حصل قبل التاني بس الساعه تقول العكس


طب ما نعمل Sync؟
بنستخدم NTP (Network Time Protocol):
جهازك يسأل سيرفرات وقت السيرفرات دي واخدة وقتها من GPS أو مصادر دقيقة ده بيقرب الساعات من بعض لكن مش بيخليها مثالية.


في نوعين ساعات جوه اي كميوتر 
Time of Day CLock
دي الساعه الطبيعيه اللي عارفينها بتحسب الوقت من 1 يناير 1970
بس مش دايما دقيقه

Monotonic Clock
دي ساعة بتطلع لقدّام بس عمرها ما ترجع
و كل جهاز غير التاني مينفعش نقارن جهازين 
بس ممكن نستخدمها مثلا اننا ناخد قرايه او نحسب الفرق في الوقت اللي عدي

طب و الـ CPUs؟
في أجهزة فيها أكتر من CPU  كل CPU ليه تايمر الـ OS بيحاول يخبي الصعوبه دي ويطلعلك وقت monotonic

NTP و الـ Monotonic Clock
NTP:
ميقدرش يرجع الساعة بس يقدر: يسرّعها شوية أو يبطّأها شوية ده اسمه slewing يعني الزمن ماشي لقدّام بس السرعة بتتغير سنة صغيرة وده مقبول جدًا في قياس المدد.

يعني  ببساطه برضو
استخدم Time-of-Day لما:
عايز تاريخ
عايز وقت مفهوم للبشر
logs
scheduling
استخدم Monotonic لما:
timeouts
response time
latency
أي “قد إيه وقت عدّى”


Clock Synchronization and Accuracy

ليه Clock Synchronization أصلاً صعب؟
احنا ممكن نفكر بطريقه “ما كلنا بنستخدم NTP وخلاص”
بس الحقيقة الساعة نفسها (الهاردوير) وحشة والشبكة غير مضمونة


في مشكلة الهاردوير (Quartz Drift)
كل جهاز فيه quartz clock و ده بيقدم او يأخر و يتأثر بالحراره
جوجل نفسها بتقول clock drift = 200 ppm
يعني إيه؟
لو بتعمل sync كل 30 ثانية → ممكن تغلط 6 ms
لو بتعمل sync مرة في اليوم → ممكن تغلط 17 ثانية


في كمان مشكله ان NTP ممكن يعمل reset للساعة
لو جهازك متأخر أو متقدم جامد NTP ممكن يرفض يعمل sync أو يرجّع الساعة فجأة أو يزوّدها فجأة فالبرنامج اللي شاف time قبل time بعد

ممكن يشوف الزمن رجع لورا أو راح لقدّام وده مشكله كبيره لأي logic معتمد على الوقت.


في نقطه نفكر فيها براحه بقا و هي 
Misconfiguration أخطر من crash

دي نقطة مهمة جدًا بتقول ان لو:
CPU بايظ → السيستم يقع
Network مقفولة → السيستم يقع
لكن لو ال Clock بايظة؟ السيستم شغال بس بيبوّظ الداتا بهدوووء وده أخطر بكتير
عشان Silent data loss

